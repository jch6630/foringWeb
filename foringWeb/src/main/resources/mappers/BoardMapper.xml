<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="kr.co.foring.board.mapper.BoardMapper">
	<select id="boardList" parameterType="map" resultType="kr.co.foring.board.domain.BoardDTO">
	 <![CDATA[
			SELECT	boardid,
					categorymenu,
					usernick,
					disclosure,
					boardpw,
					boardtitle,
					boardcontent
			FROM	(
						SELECT	rownum rn,
								boardid,
								categorymenu,
								usernick,
								disclosure,
								boardpw,
								boardtitle,
								boardcontent
						FROM	tbl_board
						WHERE	categorymenu = #{categorymenu}
						AND		rownum <= #{cri.pageNum} * #{cri.amount}
						ORDER BY boardid DESC
					)
			WHERE	rn > (#{cri.pageNum}-1)*#{cri.amount}
			]]>
	</select>
	<select id="getTotalCnt" resultType="int">
			SELECT	COUNT(*)
			FROM	tbl_board
			WHERE	categorymenu = #{categorymenu}
			AND		boardid > 0
	</select>
</mapper>